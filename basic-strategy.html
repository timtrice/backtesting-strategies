<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Backtesting Strategies with R</title>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
  <meta name="description" content="Backtesting strategies with R">
  <meta name="generator" content="bookdown 0.0.62 and GitBook 2.6.7">

  <meta property="og:title" content="Backtesting Strategies with R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Backtesting strategies with R" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Backtesting Strategies with R" />
  
  <meta name="twitter:description" content="Backtesting strategies with R" />
  

<meta name="author" content="Tim Trice">

<meta name="date" content="2016-05-02">

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="get-symbols.html">
<link rel="next" href="data-quality.html">

<script src="assets/jquery-2.2.3/jquery.min.js"></script>
<link href="assets/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="assets/htmlwidgets-0.6/htmlwidgets.js"></script>
<script src="assets/datatables-binding-0.1/datatables.js"></script>
<script src="assets/datatables-1.10.7/jquery.dataTables.min.js"></script>
<link href="assets/datatables-default-1.10.7/dataTables.extra.css" rel="stylesheet" />
<link href="assets/datatables-default-1.10.7/jquery.dataTables.min.css" rel="stylesheet" />
<link href="assets/datatables-scroller-1.10.7/dataTables.scroller.min.css" rel="stylesheet" />
<script src="assets/datatables-scroller-1.10.7/dataTables.scroller.min.js"></script>
<link href="assets/datatables-fixedColumns-1.10.7/dataTables.fixedColumns.min.css" rel="stylesheet" />
<script src="assets/datatables-fixedColumns-1.10.7/dataTables.fixedColumns.min.js"></script>
<link href="assets/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet" />
<script src="assets/nouislider-7.0.10/jquery.nouislider.min.js"></script>
<link href="assets/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet" />
<script src="assets/selectize-0.12.0/selectize.min.js"></script>
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-1507390-25', 'auto');
ga('send', 'pageview');

</script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="custom_styles.css" type="text/css" />
</head>

<body>


  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#r-resources"><i class="fa fa-check"></i><b>1.1</b> R Resources</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#libraries"><i class="fa fa-check"></i><b>1.2</b> Libraries</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#sessioninfo"><i class="fa fa-check"></i><b>1.3</b> SessionInfo</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="terminology.html"><a href="terminology.html"><i class="fa fa-check"></i><b>2</b> Terminology</a></li>
<li class="chapter" data-level="3" data-path="using-quantstrat.html"><a href="using-quantstrat.html"><i class="fa fa-check"></i><b>3</b> Using Quantsrat</a><ul>
<li class="chapter" data-level="3.1" data-path="using-quantstrat.html"><a href="using-quantstrat.html#settings-and-variables"><i class="fa fa-check"></i><b>3.1</b> Settings and Variables</a></li>
<li class="chapter" data-level="3.2" data-path="using-quantstrat.html"><a href="using-quantstrat.html#symbols"><i class="fa fa-check"></i><b>3.2</b> Symbols</a></li>
<li class="chapter" data-level="3.3" data-path="using-quantstrat.html"><a href="using-quantstrat.html#checkBlotterUpdate"><i class="fa fa-check"></i><b>3.3</b> checkBlotterUpdate()</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="get-symbols.html"><a href="get-symbols.html"><i class="fa fa-check"></i><b>4</b> Get Symbols</a><ul>
<li class="chapter" data-level="4.1" data-path="get-symbols.html"><a href="get-symbols.html#yahoo"><i class="fa fa-check"></i><b>4.1</b> Yahoo!</a></li>
<li class="chapter" data-level="4.2" data-path="get-symbols.html"><a href="get-symbols.html#google"><i class="fa fa-check"></i><b>4.2</b> Google</a></li>
<li class="chapter" data-level="4.3" data-path="get-symbols.html"><a href="get-symbols.html#mysql"><i class="fa fa-check"></i><b>4.3</b> MySQL</a></li>
<li class="chapter" data-level="4.4" data-path="get-symbols.html"><a href="get-symbols.html#fred"><i class="fa fa-check"></i><b>4.4</b> FRED</a></li>
<li class="chapter" data-level="4.5" data-path="get-symbols.html"><a href="get-symbols.html#oanda"><i class="fa fa-check"></i><b>4.5</b> OANDA</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="basic-strategy.html"><a href="basic-strategy.html"><i class="fa fa-check"></i><b>5</b> Basic Strategy</a><ul>
<li class="chapter" data-level="5.1" data-path="basic-strategy.html"><a href="basic-strategy.html#strategy-setup"><i class="fa fa-check"></i><b>5.1</b> Strategy Setup</a></li>
<li class="chapter" data-level="5.2" data-path="basic-strategy.html"><a href="basic-strategy.html#add-indicators"><i class="fa fa-check"></i><b>5.2</b> Add Indicators</a></li>
<li class="chapter" data-level="5.3" data-path="basic-strategy.html"><a href="basic-strategy.html#add-signals"><i class="fa fa-check"></i><b>5.3</b> Add Signals</a></li>
<li class="chapter" data-level="5.4" data-path="basic-strategy.html"><a href="basic-strategy.html#add-rules"><i class="fa fa-check"></i><b>5.4</b> Add Rules</a></li>
<li class="chapter" data-level="5.5" data-path="basic-strategy.html"><a href="basic-strategy.html#apply-strategy"><i class="fa fa-check"></i><b>5.5</b> Apply Strategy</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data-quality.html"><a href="data-quality.html"><i class="fa fa-check"></i><b>6</b> Data Quality</a><ul>
<li class="chapter" data-level="6.1" data-path="data-quality.html"><a href="data-quality.html#yahoo-vs.google"><i class="fa fa-check"></i><b>6.1</b> Yahoo! vs. Google</a></li>
<li class="chapter" data-level="6.2" data-path="data-quality.html"><a href="data-quality.html#examining-trades"><i class="fa fa-check"></i><b>6.2</b> Examining Trades</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="parameter-optimization.html"><a href="parameter-optimization.html"><i class="fa fa-check"></i><b>7</b> Parameter Optimization</a><ul>
<li class="chapter" data-level="7.1" data-path="parameter-optimization.html"><a href="parameter-optimization.html#add-distribution"><i class="fa fa-check"></i><b>7.1</b> Add Distribution</a></li>
<li class="chapter" data-level="7.2" data-path="parameter-optimization.html"><a href="parameter-optimization.html#add-distribution-constraint"><i class="fa fa-check"></i><b>7.2</b> Add Distribution Constraint</a></li>
<li class="chapter" data-level="7.3" data-path="parameter-optimization.html"><a href="parameter-optimization.html#running-parallel"><i class="fa fa-check"></i><b>7.3</b> Running Parallel</a></li>
<li class="chapter" data-level="7.4" data-path="parameter-optimization.html"><a href="parameter-optimization.html#apply-paramset"><i class="fa fa-check"></i><b>7.4</b> Apply Paramset</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="stop-loss.html"><a href="stop-loss.html"><i class="fa fa-check"></i><b>8</b> Stop-Loss Orders</a><ul>
<li class="chapter" data-level="8.1" data-path="stop-loss.html"><a href="stop-loss.html#add-indicators-1"><i class="fa fa-check"></i><b>8.1</b> Add Indicators</a></li>
<li class="chapter" data-level="8.2" data-path="stop-loss.html"><a href="stop-loss.html#add-signals-1"><i class="fa fa-check"></i><b>8.2</b> Add Signals</a></li>
<li class="chapter" data-level="8.3" data-path="stop-loss.html"><a href="stop-loss.html#add-rules-1"><i class="fa fa-check"></i><b>8.3</b> Add Rules</a></li>
<li class="chapter" data-level="8.4" data-path="stop-loss.html"><a href="stop-loss.html#add-position-limit"><i class="fa fa-check"></i><b>8.4</b> Add Position Limit</a></li>
<li class="chapter" data-level="8.5" data-path="stop-loss.html"><a href="stop-loss.html#enable-rules"><i class="fa fa-check"></i><b>8.5</b> Enable Rules</a></li>
<li class="chapter" data-level="8.6" data-path="stop-loss.html"><a href="stop-loss.html#apply-strategy-1"><i class="fa fa-check"></i><b>8.6</b> Apply Strategy</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="stop-loss-optimization.html"><a href="stop-loss-optimization.html"><i class="fa fa-check"></i><b>9</b> Stop Loss Optimization</a><ul>
<li class="chapter" data-level="9.1" data-path="stop-loss-optimization.html"><a href="stop-loss-optimization.html#add-indicators-2"><i class="fa fa-check"></i><b>9.1</b> Add Indicators</a></li>
<li class="chapter" data-level="9.2" data-path="stop-loss-optimization.html"><a href="stop-loss-optimization.html#add-signals-2"><i class="fa fa-check"></i><b>9.2</b> Add Signals</a></li>
<li class="chapter" data-level="9.3" data-path="stop-loss-optimization.html"><a href="stop-loss-optimization.html#add-rules-2"><i class="fa fa-check"></i><b>9.3</b> Add Rules</a></li>
<li class="chapter" data-level="9.4" data-path="stop-loss-optimization.html"><a href="stop-loss-optimization.html#add-position-limit-1"><i class="fa fa-check"></i><b>9.4</b> Add Position Limit</a></li>
<li class="chapter" data-level="9.5" data-path="stop-loss-optimization.html"><a href="stop-loss-optimization.html#add-distribution-1"><i class="fa fa-check"></i><b>9.5</b> Add Distribution</a></li>
<li class="chapter" data-level="9.6" data-path="stop-loss-optimization.html"><a href="stop-loss-optimization.html#add-distribution-constraint-1"><i class="fa fa-check"></i><b>9.6</b> Add Distribution Constraint</a></li>
<li class="chapter" data-level="9.7" data-path="stop-loss-optimization.html"><a href="stop-loss-optimization.html#enable-rules-1"><i class="fa fa-check"></i><b>9.7</b> Enable Rules</a></li>
<li class="chapter" data-level="9.8" data-path="stop-loss-optimization.html"><a href="stop-loss-optimization.html#apply-paramset-1"><i class="fa fa-check"></i><b>9.8</b> Apply Paramset</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="trailing-stops.html"><a href="trailing-stops.html"><i class="fa fa-check"></i><b>10</b> Trailing Stops</a><ul>
<li class="chapter" data-level="10.1" data-path="trailing-stops.html"><a href="trailing-stops.html#osfixeddollar"><i class="fa fa-check"></i><b>10.1</b> osFixedDollar</a></li>
<li class="chapter" data-level="10.2" data-path="trailing-stops.html"><a href="trailing-stops.html#add-indicators-3"><i class="fa fa-check"></i><b>10.2</b> Add Indicators</a></li>
<li class="chapter" data-level="10.3" data-path="trailing-stops.html"><a href="trailing-stops.html#add-signals-3"><i class="fa fa-check"></i><b>10.3</b> Add Signals</a></li>
<li class="chapter" data-level="10.4" data-path="trailing-stops.html"><a href="trailing-stops.html#add-rules-3"><i class="fa fa-check"></i><b>10.4</b> Add Rules</a></li>
<li class="chapter" data-level="10.5" data-path="trailing-stops.html"><a href="trailing-stops.html#enable-rules-2"><i class="fa fa-check"></i><b>10.5</b> Enable Rules</a></li>
<li class="chapter" data-level="10.6" data-path="trailing-stops.html"><a href="trailing-stops.html#save-strategy"><i class="fa fa-check"></i><b>10.6</b> Save Strategy</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="obtaining-resources.html"><a href="obtaining-resources.html"><i class="fa fa-check"></i><b>11</b> Obtaining Resources</a><ul>
<li class="chapter" data-level="11.1" data-path="obtaining-resources.html"><a href="obtaining-resources.html#amazon-web-services"><i class="fa fa-check"></i><b>11.1</b> Amazon Web Services</a></li>
<li class="chapter" data-level="11.2" data-path="obtaining-resources.html"><a href="obtaining-resources.html#getting-started"><i class="fa fa-check"></i><b>11.2</b> Getting Started</a><ul>
<li class="chapter" data-level="11.2.1" data-path="obtaining-resources.html"><a href="obtaining-resources.html#installing-quantstrat"><i class="fa fa-check"></i><b>11.2.1</b> Installing Quantstrat</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="obtaining-resources.html"><a href="obtaining-resources.html#testing-resources"><i class="fa fa-check"></i><b>11.3</b> Testing Resources</a></li>
<li class="chapter" data-level="11.4" data-path="obtaining-resources.html"><a href="obtaining-resources.html#changing-instances"><i class="fa fa-check"></i><b>11.4</b> Changing Instances</a></li>
<li class="chapter" data-level="11.5" data-path="obtaining-resources.html"><a href="obtaining-resources.html#stop-the-server"><i class="fa fa-check"></i><b>11.5</b> Stop the Server</a></li>
<li class="chapter" data-level="11.6" data-path="obtaining-resources.html"><a href="obtaining-resources.html#reading-resources"><i class="fa fa-check"></i><b>11.6</b> Reading Resources</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="analyzing-results.html"><a href="analyzing-results.html"><i class="fa fa-check"></i><b>12</b> Analyzing Results</a><ul>
<li class="chapter" data-level="12.1" data-path="analyzing-results.html"><a href="analyzing-results.html#apply-strategy-2"><i class="fa fa-check"></i><b>12.1</b> Apply Strategy</a></li>
<li class="chapter" data-level="12.2" data-path="analyzing-results.html"><a href="analyzing-results.html#chart-positions"><i class="fa fa-check"></i><b>12.2</b> Chart Positions</a></li>
<li class="chapter" data-level="12.3" data-path="analyzing-results.html"><a href="analyzing-results.html#trade-statistics"><i class="fa fa-check"></i><b>12.3</b> Trade Statistics</a><ul>
<li class="chapter" data-level="12.3.1" data-path="analyzing-results.html"><a href="analyzing-results.html#trade-related"><i class="fa fa-check"></i><b>12.3.1</b> Trade Related</a></li>
<li class="chapter" data-level="12.3.2" data-path="analyzing-results.html"><a href="analyzing-results.html#profit-related"><i class="fa fa-check"></i><b>12.3.2</b> Profit Related</a></li>
<li class="chapter" data-level="12.3.3" data-path="analyzing-results.html"><a href="analyzing-results.html#averages"><i class="fa fa-check"></i><b>12.3.3</b> Averages</a></li>
<li class="chapter" data-level="12.3.4" data-path="analyzing-results.html"><a href="analyzing-results.html#performance-summary"><i class="fa fa-check"></i><b>12.3.4</b> Performance Summary</a></li>
<li class="chapter" data-level="12.3.5" data-path="analyzing-results.html"><a href="analyzing-results.html#per-trade-statistics"><i class="fa fa-check"></i><b>12.3.5</b> Per Trade Statistics</a></li>
<li class="chapter" data-level="12.3.6" data-path="analyzing-results.html"><a href="analyzing-results.html#performance-statistics"><i class="fa fa-check"></i><b>12.3.6</b> Performance Statistics</a></li>
<li class="chapter" data-level="12.3.7" data-path="analyzing-results.html"><a href="analyzing-results.html#risk-statistics"><i class="fa fa-check"></i><b>12.3.7</b> Risk Statistics</a></li>
<li class="chapter" data-level="12.3.8" data-path="analyzing-results.html"><a href="analyzing-results.html#buy-and-hold-performance"><i class="fa fa-check"></i><b>12.3.8</b> Buy and Hold Performance</a></li>
<li class="chapter" data-level="12.3.9" data-path="analyzing-results.html"><a href="analyzing-results.html#strategy-vs.market"><i class="fa fa-check"></i><b>12.3.9</b> Strategy vs. Market</a></li>
<li class="chapter" data-level="12.3.10" data-path="analyzing-results.html"><a href="analyzing-results.html#riskreturn-scatterplot"><i class="fa fa-check"></i><b>12.3.10</b> Risk/Return Scatterplot</a></li>
<li class="chapter" data-level="12.3.11" data-path="analyzing-results.html"><a href="analyzing-results.html#relative-performance"><i class="fa fa-check"></i><b>12.3.11</b> Relative Performance</a></li>
<li class="chapter" data-level="12.3.12" data-path="analyzing-results.html"><a href="analyzing-results.html#portfolio-summary"><i class="fa fa-check"></i><b>12.3.12</b> Portfolio Summary</a></li>
<li class="chapter" data-level="12.3.13" data-path="analyzing-results.html"><a href="analyzing-results.html#order-book"><i class="fa fa-check"></i><b>12.3.13</b> Order Book</a></li>
<li class="chapter" data-level="12.3.14" data-path="analyzing-results.html"><a href="analyzing-results.html#maximum-adverse-excursion"><i class="fa fa-check"></i><b>12.3.14</b> Maximum Adverse Excursion</a></li>
<li class="chapter" data-level="12.3.15" data-path="analyzing-results.html"><a href="analyzing-results.html#maximum-favorable-excursion"><i class="fa fa-check"></i><b>12.3.15</b> Maximum Favorable Excursion</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="analyzing-results.html"><a href="analyzing-results.html#account-summary"><i class="fa fa-check"></i><b>12.4</b> Account Summary</a><ul>
<li class="chapter" data-level="12.4.1" data-path="analyzing-results.html"><a href="analyzing-results.html#equity-curve"><i class="fa fa-check"></i><b>12.4.1</b> Equity Curve</a></li>
<li class="chapter" data-level="12.4.2" data-path="analyzing-results.html"><a href="analyzing-results.html#account-performance-summary"><i class="fa fa-check"></i><b>12.4.2</b> Account Performance Summary</a></li>
<li class="chapter" data-level="12.4.3" data-path="analyzing-results.html"><a href="analyzing-results.html#cumulative-returns"><i class="fa fa-check"></i><b>12.4.3</b> Cumulative Returns</a></li>
<li class="chapter" data-level="12.4.4" data-path="analyzing-results.html"><a href="analyzing-results.html#distribution-analysis"><i class="fa fa-check"></i><b>12.4.4</b> Distribution Analysis</a></li>
<li class="chapter" data-level="12.4.5" data-path="analyzing-results.html"><a href="analyzing-results.html#annualized-returns"><i class="fa fa-check"></i><b>12.4.5</b> Annualized Returns</a></li>
<li class="chapter" data-level="12.4.6" data-path="analyzing-results.html"><a href="analyzing-results.html#performance-scatter-plot"><i class="fa fa-check"></i><b>12.4.6</b> Performance Scatter Plot</a></li>
<li class="chapter" data-level="12.4.7" data-path="analyzing-results.html"><a href="analyzing-results.html#notional-costs"><i class="fa fa-check"></i><b>12.4.7</b> Notional Costs</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="walk-forward-analysis.html"><a href="walk-forward-analysis.html"><i class="fa fa-check"></i><b>13</b> Walk Forward Analysis</a></li>
<li class="chapter" data-level="14" data-path="monte-carlo-analysis.html"><a href="monte-carlo-analysis.html"><i class="fa fa-check"></i><b>14</b> Monte Carlo Analysis</a></li>
<li class="chapter" data-level="15" data-path="warnings-and-errors.html"><a href="warnings-and-errors.html"><i class="fa fa-check"></i><b>15</b> Warnings and Errors</a><ul>
<li class="chapter" data-level="15.1" data-path="warnings-and-errors.html"><a href="warnings-and-errors.html#must-use-auto.assigntrue-for-multiple-symbols-requests"><i class="fa fa-check"></i><b>15.1</b> Must use auto.assign=TRUE for multiple Symbols requests</a></li>
<li class="chapter" data-level="15.2" data-path="warnings-and-errors.html"><a href="warnings-and-errors.html#missing-in-call-to-function-add.distribution"><i class="fa fa-check"></i><b>15.2</b> Missing in call to function add.distribution</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="about-backtesting-strategies-with-r.html"><a href="about-backtesting-strategies-with-r.html"><i class="fa fa-check"></i><b>16</b> About “Backtesting Strategies with R”</a><ul>
<li class="chapter" data-level="16.1" data-path="about-backtesting-strategies-with-r.html"><a href="about-backtesting-strategies-with-r.html#tim-trice"><i class="fa fa-check"></i><b>16.1</b> Tim Trice</a></li>
<li class="chapter" data-level="16.2" data-path="about-backtesting-strategies-with-r.html"><a href="about-backtesting-strategies-with-r.html#to-you-the-reader"><i class="fa fa-check"></i><b>16.2</b> To You, the Reader</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Backtesting Strategies with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="basic-strategy" class="section level1">
<h1><span class="header-section-number">Chapter 5</span> Basic Strategy</h1>
<p>Let’s kick things off with a variation of the Luxor trading strategy. This strategy uses two SMA indicators: SMA(10) and SMA(30).</p>
<p>If the SMA(10) indicator is greater than or equal to the SMA(30) indicator we will submit a stoplimit long order to open and close any short positions that may be open. If the SMA(10) is less than the SMA(30) we will submit a stoplimit short order to open and close any open long positions.</p>
<div class="strategy">
<p>
If SMA(10) &gt;= SMA(30):
</p>
<pre><code>BTC short, BTO long</code></pre>
<p>
Else if SMA(10) &lt; SMA(30):
</p>
<pre><code>STC long, STO short</code></pre>
</div>
<p><strong>Note:</strong> Remember we have already set some variables earlier in the book. If you copy and paste the code below by itself you will get errors. There will be complete tutorials listed later in the book.</p>
<div id="strategy-setup" class="section level2">
<h2><span class="header-section-number">5.1</span> Strategy Setup</h2>
<p>We load our symbols into <code>symbols</code>.</p>
<pre><code>```r
print(basic_symbols())
```

```
## [1] &quot;IWM&quot; &quot;QQQ&quot; &quot;SPY&quot;
```

```r
symbols &lt;- basic_symbols()
```</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">getSymbols</span>(<span class="dt">Symbols =</span> symbols, 
           <span class="dt">src =</span> <span class="st">&quot;yahoo&quot;</span>, 
           <span class="dt">index.class =</span> <span class="st">&quot;POSIXct&quot;</span>,
           <span class="dt">from =</span> start_date, 
           <span class="dt">to =</span> end_date, 
           <span class="dt">adjust =</span> adjustment)</code></pre></div>
<pre><code>## [1] &quot;IWM&quot; &quot;QQQ&quot; &quot;SPY&quot;</code></pre>
<p>After we’ve loaded our symbols we use <code>FinancialInstrument::stock()</code> to define the meta-data for our symbols. In this case we’re defining the currency in USD (US Dollars) with a multiplier of 1. Multiplier is applied to price. This will vary depending on the financial instrument you are working on but for stocks it should always be 1.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">stock</span>(symbols, 
      <span class="dt">currency =</span> <span class="st">&quot;USD&quot;</span>, 
      <span class="dt">multiplier =</span> <span class="dv">1</span>)</code></pre></div>
<pre><code>## [1] &quot;IWM&quot; &quot;QQQ&quot; &quot;SPY&quot;</code></pre>
<p>Next we’ll assign proper names for our portfolio, account and strategy objects. These can be any name you want and should be based on how you intend to log the data later on.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">portfolio.st &lt;-<span class="st"> &quot;Port.Luxor&quot;</span>
account.st &lt;-<span class="st"> &quot;Acct.Luxor&quot;</span>
strategy.st &lt;-<span class="st"> &quot;Strat.Luxor&quot;</span></code></pre></div>
<p>We remove any residuals from previous runs by clearing out the portfolio and account values. At this point for what we have done so far this is unnecessary. However, it’s a good habit to include this with all of your scripts as data stored in memory can affect results or generate errors.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rm.strat</span>(portfolio.st)
<span class="kw">rm.strat</span>(account.st)</code></pre></div>
<p>Now we initialize our portfolio, account and orders. We will also store our strategy to save for later.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">initPortf</span>(<span class="dt">name =</span> portfolio.st,
          <span class="dt">symbols =</span> symbols,
          <span class="dt">initDate =</span> init_date)</code></pre></div>
<pre><code>## [1] &quot;Port.Luxor&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">initAcct</span>(<span class="dt">name =</span> account.st,
         <span class="dt">portfolios =</span> portfolio.st,
         <span class="dt">initDate =</span> init_date,
         <span class="dt">initEq =</span> init_equity)</code></pre></div>
<pre><code>## [1] &quot;Acct.Luxor&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">initOrders</span>(<span class="dt">portfolio =</span> portfolio.st,
           <span class="dt">symbols =</span> symbols,
           <span class="dt">initDate =</span> init_date)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">strategy</span>(strategy.st, <span class="dt">store =</span> <span class="ot">TRUE</span>)</code></pre></div>
</div>
<div id="add-indicators" class="section level2">
<h2><span class="header-section-number">5.2</span> Add Indicators</h2>
<p>Indicators are functions used to measure a variable. A SMA is just an average of the previous n prices; typically closing price. So SMA(10) is just an average of the last 10 closing prices.</p>
<p>This is where the <code>TTR</code> library comes in; short for Technical Trading Rules. <code>SMA()</code> is a function of <code>TTR</code> as are many other indicators. If you want MACD, RSI, Bollinger Bands, etc., you will use the <code>TTR</code> library.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">add.indicator</span>(<span class="dt">strategy =</span> strategy.st,
              <span class="dt">name =</span> <span class="st">&quot;SMA&quot;</span>,
              <span class="dt">arguments =</span> <span class="kw">list</span>(<span class="dt">x =</span> <span class="kw">quote</span>(<span class="kw">Cl</span>(mktdata)), 
                               <span class="dt">n =</span> <span class="dv">10</span>),
              <span class="dt">label =</span> <span class="st">&quot;nFast&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;Strat.Luxor&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">add.indicator</span>(<span class="dt">strategy =</span> strategy.st, 
              <span class="dt">name =</span> <span class="st">&quot;SMA&quot;</span>, 
              <span class="dt">arguments =</span> <span class="kw">list</span>(<span class="dt">x =</span> <span class="kw">quote</span>(<span class="kw">Cl</span>(mktdata)), 
                               <span class="dt">n =</span> <span class="dv">30</span>), 
              <span class="dt">label =</span> <span class="st">&quot;nSlow&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;Strat.Luxor&quot;</code></pre>
<p><code>add.indicator</code> is a function of <code>quantstrat</code> and adds our indicators to our strategy object. For now we’ll use the following parameters:</p>
<ul>
<li><p><code>strategy</code>: As we stored our strategy name in the <code>strategy.st</code> variable all we need to do is pass that variable. Otherwise we would provide a string. Use variables when this will become redundant as we move along.</p></li>
<li><p><code>name</code>: Indicator function; for this example <em>SMA</em>. We only pass the name of the function as a character string. Parameters for the function are passed into the <code>arguments</code> parameter…</p></li>
<li><p><code>arguments</code>: If we look at <code>?SMA</code> we see required parameters are <code>x</code> and <code>n</code> with the default <code>n</code> being 10. <code>x</code> is the price object. In our example we are using closing prices.</p></li>
<li><p><code>label</code>: Label of the variable that will be added to our dataset. This must be unique for each indicator we add.</p></li>
</ul>
<p>Let’s pause for a moment and examine <em>arguments</em>. Notice we’re passing a series of functions to <code>x</code>. If you wanted to access the <code>Close</code> variable of the <code>IWM</code> dataset you would normally do so by calling <code>IWM$Close</code> or <code>IWM[,4]</code>. Here we’re accessing a <code>mktdata</code> data object</p>
<p><code>mktdata</code> is a special dataset created for each symbol that will store all of our indicators and signals. When the strategy is ran you will see the <code>mktdata</code> object in your environment. It will only exist for the last symbol the strategy executed.</p>
<p>The <code>add.indicator()</code> function (along with <code>add.signal</code> and <code>add.rules</code> which we’ll discuss momentarily) is not evaluated until we run our strategy. All it does is add our specs to the strategy object. When we run our strategy the <code>mktdata</code> object is created for each symbol iteration where our data will be added.</p>
<p><code>Cl</code> is actually short-hand for Close as you may have guessed. In fact, we have several short-hand functions for our variables:</p>
<ul>
<li><p><code>Op()</code>: Open</p></li>
<li><p><code>Hi()</code>: High</p></li>
<li><p><code>Lo()</code>: Low</p></li>
<li><p><code>Cl()</code>: Close</p></li>
<li><p><code>Vo()</code>: Volume</p></li>
<li><p><code>Ad()</code>: Adjusted</p></li>
<li><p><code>OpCl()</code>: Open and Close (n x 2 dataset)</p></li>
<li><p><code>HLC()</code>: High, Low and Close (n x 3 dataset)</p></li>
</ul>
<p>See the help for any of those symbols above for a more detailed listing.</p>
<p><code>quote()</code> is a R function that simply wraps the supplied parameter in quotes.</p>
<p>So we’ve added two indicators to our <code>mktdata</code> object, <code>nFast</code> (SMA(10)) and <code>nSlow</code> (SMA(30)). Let’s now add signals.</p>
</div>
<div id="add-signals" class="section level2">
<h2><span class="header-section-number">5.3</span> Add Signals</h2>
<p>Signals are a value given when conditions are met by our indicators. For example, in this strategy we want a signal whenever <code>nFast</code> is greater than or equal to <code>nSlow</code>. We also want another signal where <code>nFast</code> is less than <code>nSlow</code>. We’ll name these signals <code>long</code> and <code>short</code>, respectively.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">add.signal</span>(<span class="dt">strategy =</span> strategy.st,
           <span class="dt">name=</span><span class="st">&quot;sigCrossover&quot;</span>,
           <span class="dt">arguments =</span> <span class="kw">list</span>(<span class="dt">columns =</span> <span class="kw">c</span>(<span class="st">&quot;nFast&quot;</span>, <span class="st">&quot;nSlow&quot;</span>),
                            <span class="dt">relationship =</span> <span class="st">&quot;gte&quot;</span>),
           <span class="dt">label =</span> <span class="st">&quot;long&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;Strat.Luxor&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">add.signal</span>(<span class="dt">strategy =</span> strategy.st,
           <span class="dt">name=</span><span class="st">&quot;sigCrossover&quot;</span>,
           <span class="dt">arguments =</span> <span class="kw">list</span>(<span class="dt">columns =</span> <span class="kw">c</span>(<span class="st">&quot;nFast&quot;</span>, <span class="st">&quot;nSlow&quot;</span>),
                            <span class="dt">relationship =</span> <span class="st">&quot;lt&quot;</span>),
           <span class="dt">label =</span> <span class="st">&quot;short&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;Strat.Luxor&quot;</code></pre>
<p>Again, we’re passing <em>strategy.st</em> to the <code>strategy</code> parameter. <code>name</code> takes a function just as it did in <code>add.indicator</code>. Here we’ll use some built-in <code>quantstrat</code> functions. Let’s take a quick look at what’s available:</p>
<ul>
<li><code>sigComparison</code>: boolean, compare two variables by relationship
<ul>
<li><em>gt</em> greater than</li>
<li><em>lt</em> less than</li>
<li><em>eq</em> equal to</li>
<li><em>gte</em> greater than or equal to</li>
<li><em>lte</em> less than or equal to</li>
</ul></li>
<li><p><code>sigCrossover</code>: boolean, TRUE when one signal crosses another. Uses the same relationships as <code>sigComparison</code></p></li>
<li><p><code>sigFormula</code>: apply a formula to multiple variables.</p></li>
<li><p><code>sigPeak</code>: identify local minima or maxima of an indicator</p></li>
<li><p><code>sigThreshold</code>: boolean, when an indicator crosses a value. Uses relationships as identified above.</p></li>
<li><p><code>sigTimestamp</code>: generates a signal based on a timestamp.</p></li>
</ul>
<p>We’ll attempt to use each of these signals throughout the book when possible.</p>
</div>
<div id="add-rules" class="section level2">
<h2><span class="header-section-number">5.4</span> Add Rules</h2>
<p>We’ve now constructed our <code>nFast</code> and <code>nSlow</code> indicators and generated signals based on those indicators. Now we have to add rules for those signals.</p>
<p><code>add.rules</code> will determine the positions we take depending on our signals, what type of order we’ll place and how many shares we will buy.</p>
<p>Whenever our <code>long</code> variable (<code>sigcol</code>) is TRUE (<code>sigval</code>) we want to place a stoplimit order (<code>ordertype</code>). Our preference is at the High (<code>prefer</code>) plus <code>threshold</code>. We want to buy 100 shares (<code>orderqty</code>). A new variable <code>EnterLONG</code> will be added to <code>mktdata</code>. When we enter (<code>type</code>) a position <code>EnterLONG</code> will be TRUE, otherwise FALSE. This order will not <code>replace</code> any other open orders.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">add.rule</span>(<span class="dt">strategy =</span> strategy.st,
         <span class="dt">name =</span> <span class="st">&quot;ruleSignal&quot;</span>,
         <span class="dt">arguments =</span> <span class="kw">list</span>(<span class="dt">sigcol =</span> <span class="st">&quot;long&quot;</span>,
                          <span class="dt">sigval =</span> <span class="ot">TRUE</span>,
                          <span class="dt">orderqty =</span> <span class="dv">100</span>,
                          <span class="dt">ordertype =</span> <span class="st">&quot;stoplimit&quot;</span>,
                          <span class="dt">orderside =</span> <span class="st">&quot;long&quot;</span>, 
                          <span class="dt">threshold =</span> <span class="fl">0.0005</span>,
                          <span class="dt">prefer =</span> <span class="st">&quot;High&quot;</span>, 
                          <span class="dt">TxnFees =</span> -<span class="dv">10</span>, 
                          <span class="dt">replace =</span> <span class="ot">FALSE</span>),
         <span class="dt">type =</span> <span class="st">&quot;enter&quot;</span>,
         <span class="dt">label =</span> <span class="st">&quot;EnterLONG&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;Strat.Luxor&quot;</code></pre>
<p>If our <code>short</code> variable (<code>sigcol</code>) is TRUE (<code>sigval</code>) we will place another stoplimit order (<code>ordertype</code>) with a preference on the Low (<code>prefer</code>). We will sell 100 shares (<code>orderqty</code>). This order will not replace any open orders (<code>replace</code>).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">add.rule</span>(strategy.st,
         <span class="dt">name =</span> <span class="st">&quot;ruleSignal&quot;</span>,
         <span class="dt">arguments =</span> <span class="kw">list</span>(<span class="dt">sigcol =</span> <span class="st">&quot;short&quot;</span>,
                          <span class="dt">sigval =</span> <span class="ot">TRUE</span>,
                          <span class="dt">orderqty =</span> -<span class="dv">100</span>,
                          <span class="dt">ordertype =</span> <span class="st">&quot;stoplimit&quot;</span>,
                          <span class="dt">threshold =</span> -<span class="fl">0.005</span>, 
                          <span class="dt">orderside =</span> <span class="st">&quot;short&quot;</span>, 
                          <span class="dt">replace =</span> <span class="ot">FALSE</span>, 
                          <span class="dt">TxnFees =</span> -<span class="dv">10</span>, 
                          <span class="dt">prefer =</span> <span class="st">&quot;Low&quot;</span>),
         <span class="dt">type =</span> <span class="st">&quot;enter&quot;</span>,
         <span class="dt">label =</span> <span class="st">&quot;EnterSHORT&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;Strat.Luxor&quot;</code></pre>
<p>We now have rules set up to enter positions based on our signals. However, we do not have rules to exit open positions. We’ll create those now.</p>
<p>Our next rule, <code>Exit2SHORT</code>, is a simple market order to exit (<code>type</code>) when <code>short</code> is TRUE (<code>sigcol</code>, <code>sigval</code>). This closes out all long positions (<code>orderside</code>, <code>orderqty</code>). This order will replace (<code>replace</code>) any open orders.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">add.rule</span>(strategy.st, 
         <span class="dt">name =</span> <span class="st">&quot;ruleSignal&quot;</span>, 
         <span class="dt">arguments =</span> <span class="kw">list</span>(<span class="dt">sigcol =</span> <span class="st">&quot;short&quot;</span>, 
                          <span class="dt">sigval =</span> <span class="ot">TRUE</span>, 
                          <span class="dt">orderside =</span> <span class="st">&quot;long&quot;</span>, 
                          <span class="dt">ordertype =</span> <span class="st">&quot;market&quot;</span>, 
                          <span class="dt">orderqty =</span> <span class="st">&quot;all&quot;</span>, 
                          <span class="dt">TxnFees =</span> -<span class="dv">10</span>, 
                          <span class="dt">replace =</span> <span class="ot">TRUE</span>), 
         <span class="dt">type =</span> <span class="st">&quot;exit&quot;</span>, 
         <span class="dt">label =</span> <span class="st">&quot;Exit2SHORT&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;Strat.Luxor&quot;</code></pre>
<p>Lastly, we close out any short positions (<code>orderside</code>) when <code>long</code> is TRUE (<code>sigcol</code>, <code>sigval</code>). We will exit (<code>type</code>) at market price (<code>ordertype</code>) all open positions (<code>orderqty</code>). This order will replace any open orders we have (<code>replace</code>).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">add.rule</span>(strategy.st, 
         <span class="dt">name =</span> <span class="st">&quot;ruleSignal&quot;</span>, 
         <span class="dt">arguments =</span> <span class="kw">list</span>(<span class="dt">sigcol =</span> <span class="st">&quot;long&quot;</span>, 
                          <span class="dt">sigval =</span> <span class="ot">TRUE</span>, 
                          <span class="dt">orderside =</span> <span class="st">&quot;short&quot;</span>, 
                          <span class="dt">ordertype =</span> <span class="st">&quot;market&quot;</span>, 
                          <span class="dt">orderqty =</span> <span class="st">&quot;all&quot;</span>, 
                          <span class="dt">TxnFees =</span> -<span class="dv">10</span>, 
                          <span class="dt">replace =</span> <span class="ot">TRUE</span>), 
         <span class="dt">type =</span> <span class="st">&quot;exit&quot;</span>, 
         <span class="dt">label =</span> <span class="st">&quot;Exit2LONG&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;Strat.Luxor&quot;</code></pre>
<p><code>TxnFees</code> are transaction fees associated with an order. This can be any value you choose but should accurately reflect the fees charged by your selected broker. In addition, we only show them here on exits. Some brokers charge fees on entry positions as well. <code>TxnFees</code> can be added to any rule set.</p>
<p>If you’re not sure what fees your selected broker charges - what’s wrong with you? Go find out now. Some retail brokers (TD Ameritrade, ETrade) will charge under $10 per position on unlimited shares; some such as Interactive Brokers or TradeStation will charge even less depending on the number of shares. $10 is a good starting point.</p>
</div>
<div id="apply-strategy" class="section level2">
<h2><span class="header-section-number">5.5</span> Apply Strategy</h2>
<p>Now we get to the fun part! Do or die. Here we’ll find out if we built our strategy correctly or if we have any errors in our code. Cross your fingers. Let’s go!</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cwd &lt;-<span class="st"> </span><span class="kw">getwd</span>()
<span class="kw">setwd</span>(<span class="st">&quot;./_data/&quot;</span>)
results_file &lt;-<span class="st"> </span><span class="kw">paste</span>(<span class="st">&quot;results&quot;</span>, strategy.st, <span class="st">&quot;RData&quot;</span>, <span class="dt">sep =</span> <span class="st">&quot;.&quot;</span>)
if( <span class="kw">file.exists</span>(results_file) ) {
    <span class="kw">load</span>(results_file)
} else {
    results &lt;-<span class="st"> </span><span class="kw">applyStrategy</span>(strategy.st, <span class="dt">portfolios =</span> portfolio.st)
    <span class="kw">updatePortf</span>(portfolio.st)
    <span class="kw">updateAcct</span>(account.st)
    <span class="kw">updateEndEq</span>(account.st)
    if(<span class="kw">checkBlotterUpdate</span>(portfolio.st, account.st, <span class="dt">verbose =</span> <span class="ot">TRUE</span>)) {
        <span class="kw">save</span>(<span class="dt">list =</span> <span class="st">&quot;results&quot;</span>, <span class="dt">file =</span> results_file)
        <span class="kw">save.strategy</span>(strategy.st)
    }
}
<span class="kw">setwd</span>(cwd)</code></pre></div>
<p>Awesome! We know that at least our code is good.</p>
<p><code>applyStrategy()</code> is the function we will run when we have a straight strategy. What I mean by that is a strategy that doesn’t test different parameters. We’ll get to that type of testing later.</p>
<p>You can see it’s a pretty simple call; we just pass our <code>strategy.st</code> variable as the first parameter and our portfolio as the second parameter. There is no need to get into additional parameters at the moment.</p>
<p>We won’t show the results of any more <code>applyStrategy</code> runs to save space. Just know that if you get trade output you should be good.</p>
<p>Next we update our portfolio and account objects. We do this with the <code>updatePortf()</code>, <code>updateAcct()</code> and <code>updateEndEq()</code> functions. <code>updatePortf</code> calculates the P&amp;L for each symbol in <code>symbols</code>. <code>updateAcct</code> calculcates the equity from the portfolio data. And <code>updateEndEq</code> updates the ending equity for the account. They must be called in order.</p>
<p>We also use the <code>checkBlotterUpdate()</code> mentioned in <a href="using-quantstrat.html#checkBlotterUpdate">3.3</a>. We’re looking for a TRUE value to be returned. Anything FALSE will need to be researched. (If you forgot to clear our your portfolio or strategy with the <code>rm.strat()</code> call mentioned earlier this can result in a FALSE value).</p>
<p>If <code>checkBlotterUpdate</code> returns true we save the results and our strategy (<code>save.strategy</code>) as a RData file into our _data directory. We’ll use them for analysis later.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="get-symbols.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data-quality.html" class="navigation navigation-next " aria-label="Next page""><i class="fa fa-angle-right"></i></a>

<script src="assets/gitbook-2.6.7/js/app.js"></script>
<script src="assets/gitbook-2.6.7/js/lunr.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="assets/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/timtrice/stock-book/edit/master/basic-strategy.Rmd",
"text": "Edit This Page"
},
"download": null,
"toc": {
"collapse": "subsection"
},
"toolbar": {
"position": "static"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
